<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <meta http-equiv="X-UA-Compatible" content="ie=edge">

   <!-- Bootstrap -->
   <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

   <!-- Bootstrap jQuery -->
   <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous">
   </script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous">
   </script>
   <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous">
   </script>

   <!-- Google Font -->
   <link href="https://fonts.googleapis.com/css?family=Dancing+Script:700&display=swap" rel="stylesheet">

   <!-- jQuery cdn -->
   <script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
      crossorigin="anonymous"></script>

   <!-- My CSS -->
   <link rel="stylesheet" type="text/css" href="css/style.css">

   <title>Survey Page | FriendFinder</title>
</head>

<body>
   <div class="container">
      <div class="row">
         <div class="col-sm-12 header">
            <h1>Survey Questions</h1>
         </div>
      </div>
      <br>
      <hr>
      <br>
      <div class="row">
         <div class="col-sm-12">
            <div class="intro-question">
               <h3>About You</h3>
               <div class="input-field">
                  <hr>
                  <h5>Your Name (Required)</h5>
                  <input type="text" class="validate" placeholder="Type your name here" id="username">
                  <hr>
                  <h5>Link to your Photo (Required)</h5>
                  <input type="text" class="validate" placeholder="Insert photo link here" id="userPhoto">
               </div>
            </div>
         </div>
      </div>
      <div class="row">
         <div class="col-sm-12">
            <div class="input-field">
               <h3>Question 1</h3>
               <h5>You like travelling or going on roadtrips.</h5>
               <select id="question-1">
                  <option value="" disabled>Select the most appropriate answer</option>
                  <option value="1">1 (Strongly Agree)</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5 (Strongly Disagree)</option>
               </select>
            </div>
         </div>
      </div>
      <br>
      <hr>
      <br>
      <div class="row">
         <div class="col-sm-12">
            <div class="input-field">
               <h3>Question 2</h3>
               <h5>You prefer being by yourself than hanging out with large crowds.</h5>
               <select id="question-2">
                  <option value="" disabled>Select the most appropriate answer</option>
                  <option value="1">1 (Strongly Agree)</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5 (Strongly Disagree)</option>
               </select>
            </div>
         </div>
      </div>
      <br>
      <hr>
      <br>
      <div class="row">
         <div class="col-sm-12">
            <div class="input-field">
               <h3>Question 3</h3>
               <h5>You prefer driving over public transport. Any day.</h5>
               <select id="question-3">
                  <option value="" disabled>Select the most appropriate answer</option>
                  <option value="1">1 (Strongly Agree)</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5 (Strongly Disagree)</option>
               </select>
            </div>
         </div>
      </div>
      <br>
      <hr>
      <br>
      <div class="row">
         <div class="col-sm-12">
            <div class="input-field">
               <h3>Question 4</h3>
               <h5>You prefer fast food over fine dining.</h5>
               <select id="question-4">
                  <option value="" disabled>Select the most appropriate answer</option>
                  <option value="1">1 (Strongly Agree)</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5 (Strongly Disagree)</option>
               </select>
            </div>
         </div>
      </div>
      <br>
      <hr>
      <br>
      <div class="row">
         <div class="col-sm-12">
            <div class="input-field">
               <h3>Question 5</h3>
               <h5>You prefer romantic comedy movies over other genres.</h5>
               <select id="question-5">
                  <option value="" disabled>Select the most appropriate answer</option>
                  <option value="1">1 (Strongly Agree)</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5 (Strongly Disagree)</option>
               </select>
            </div>
         </div>
      </div>
      <br>
      <hr>
      <br>
      <div class="row">
         <div class="col-sm-12">
            <div class="input-field">
               <h3>Question 6</h3>
               <h5>You prefer front end over back end web development.</h5>
               <select id="question-6">
                  <option value="" disabled>Select the most appropriate answer</option>
                  <option value="1">1 (Strongly Agree)</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5 (Strongly Disagree)</option>
               </select>
            </div>
         </div>
      </div>
      <br>
      <hr>
      <br>
      <div class="row">
         <div class="col-sm-12">
            <div class="input-field">
               <h3>Question 7</h3>
               <h5>You are an early bird.</h5>
               <select id="question-7">
                  <option value="" disabled>Select the most appropriate answer</option>
                  <option value="1">1 (Strongly Agree)</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5 (Strongly Disagree)</option>
               </select>
            </div>
         </div>
      </div>
      <br>
      <hr>
      <br>
      <div class="row">
         <div class="col-sm-12">
            <div class="input-field">
               <h3>Question 8</h3>
               <h5>PokÃ©mon > Digimon.</h5>
               <select id="question-8">
                  <option value="" disabled>Select the most appropriate answer</option>
                  <option value="1">1 (Strongly Agree)</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5 (Strongly Disagree)</option>
               </select>
            </div>
         </div>
      </div>
      <br>
      <hr>
      <br>
      <div class="row">
         <div class="col-sm-12">
            <div class="input-field">
               <h3>Question 9</h3>
               <h5>You went through a phase of side fringes.</h5>
               <select id="question-9">
                  <option value="" disabled>Select the most appropriate answer</option>
                  <option value="1">1 (Strongly Agree)</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5 (Strongly Disagree)</option>
               </select>
            </div>
         </div>
      </div>
      <br>
      <hr>
      <br>
      <div class="row">
         <div class="col-sm-12">
            <div class="input-field">
               <h3>Question 10</h3>
               <h5>You believe in P's get degrees.</h5>
               <select id="question-10">
                  <option value="" disabled>Select the most appropriate answer</option>
                  <option value="1">1 (Strongly Agree)</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5 (Strongly Disagree)</option>
               </select>
            </div>
         </div>
      </div>
      <br>
      <hr>
      <br>

      <!-- This button *should* trigger the modal -->
      <div class="submit-button">
         <button class="btn btn-info" type="submit" data-toggle="modal" data-target="#exampleModalCenter" name="Submit"
            id="submit-btn">
            <i>See my match!</i>
         </button>
      </div>
   </div>
   <br>
   <hr>
   <br>
   <footer class="footer">
      <div class="container">
         <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/Sellieee/FriendFinder">Github
               Repo</a>
         </p>
      </div>
   </footer>

   <!-- Create Modal to display match! -->
   <!-- Modal -->
   <div class="modal fade" id="match-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
      aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
         <div class="modal-content">
            <div class="modal-header">
               <h5 class="modal-title" id="exampleModalLongTitle">Your Match!</h5>
               <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
               </button>
            </div>
            <div class="modal-body">
               <h4>Your match!</h4>
               <br>
               <hr>
               <br>
               <h5 id="userMatch"></h5>
               <img id="userMatchPic" class="materialboxed center-img" width="300" height="300" src="">
            </div>
            <div class="modal-footer"> <a href="/survey" class="modal-action modal-close new-match">Find a new match!
               </a>
               <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
         </div>
      </div>
   </div>

   <!-- jQuery cdn -->
   <script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
      crossorigin="anonymous"></script>

   <!-- Bootstrap jQuery -->
   </script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous">
   </script>
   <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous">
   </script>

   <!-- Javascript Here -->
   <script>
      $(document).ready(function () {

         // Hide the modal initially
         $("#match-modal").modal("hide");

         // Submit button
         $("#submit-btn").on("click", function (event) {
            event.preventDefault();

            // Getting the user's input in survey
            var userSurvey = {
               name: $("#username").val().trim(),
               photo: $("#userPhoto").val().trim(),
               scores: [
                  $("#question-1").val().trim(),
                  $("#question-2").val().trim(),
                  $("#question-3").val().trim(),
                  $("#question-4").val().trim(),
                  $("#question-5").val().trim(),
                  $("#question-6").val().trim(),
                  $("#question-7").val().trim(),
                  $("#question-8").val().trim(),
                  $("#question-9").val().trim(),
                  $("#question-10").val().trim()
               ]
            };

            $('#match-modal').modal('toggle')

            $.post("/api/friends", userSurvey, function (data) {
               $("#userMatch").html(data.matchName);
               $("#userMatchPic").attr("src", data.matchPic)
               $("#match-modal").modal("show");
            })
         })

         $("#new-match").on("click", function () {
            window.location.reload();
         })
      })
   </script>


</body>

</html>